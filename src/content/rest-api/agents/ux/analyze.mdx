---
title: "UX and Branding Analysis API"
description: "Performs comprehensive UX analysis and automatically completes the settings.branding object"
---

import UxAnalysisTester from '@/components/ApiTester/UxAnalysisTester'

# UX and Branding Analysis API ðŸŽ¨

This API performs UX and branding analysis using only `site_id` to fetch site information from the database, automatically completes the `settings.branding` object, and generates UX recommendations, problems, and opportunities.

## ðŸš€ Features

- Automatic site data retrieval from the database using `site_id`
- Structured analysis of the website
- Automatic completion of the `settings.branding` object
- Categorized UX recommendations
- Identification of UX problems and opportunities
- UX and usability scoring
- Automatic database persistence

## ðŸ§ª Try the API

<UxAnalysisTester />

## ðŸ“‹ Available Endpoints

### POST `/api/agents/ux/analyze`

Performs a complete UX and branding analysis for the website.

### GET `/api/agents/ux/analyze`

Retrieves information about the service and its capabilities.

## ðŸ”§ Request Parameters

### Required Parameters

| Parameter | Type | Description |
|-----------|------|-------------|
| `site_id` | string | Site UUID in the database (only required parameter) |

### Optional Parameters

| Parameter | Type | Description | Default |
|-----------|------|-------------|---------|
| `user_id` | string | User UUID (auto derived from site) | auto |
| `options.timeout` | number | Timeout in ms (5000-60000) | 30000 |
| `options.includeScreenshot` | boolean | Include screenshot | true |
| `options.provider` | string | AI provider (anthropic/openai/gemini) | anthropic |
| `options.modelId` | string | Specific model ID to use | claude-3-5-sonnet-20240620 |
| `options.updateBranding` | boolean | Update branding in DB | true |
| `options.language` | string | Analysis language (en/es) | es |

## ðŸ“Š Response Structure

```json
{
  "success": true,
  "data": {
    "url": "https://example.com",
    "site_id": "site-uuid",
    "user_id": "user-uuid",
    "analysis_id": "analysis-uuid",
    "branding": {
      "brand_pyramid": {
        "brand_essence": "Brand essence",
        "brand_personality": "Brand personality",
        "brand_benefits": "Key benefits",
        "brand_attributes": "Key attributes",
        "brand_values": "Core values",
        "brand_promise": "Brand promise"
      },
      "brand_archetype": "hero",
      "color_palette": {
        "primary_color": "#000000",
        "secondary_color": "#666666",
        "accent_color": "#e0ff17"
      },
      "typography": {
        "primary_font": "Arial, sans-serif",
        "secondary_font": "Times, serif",
        "font_size_scale": "medium"
      },
      "voice_and_tone": {
        "communication_style": "professional",
        "personality_traits": ["innovative", "reliable", "professional"],
        "forbidden_words": ["cheap", "basic"],
        "preferred_phrases": ["premium quality", "customer-focused"]
      },
      "brand_guidelines": {
        "do_list": ["Maintain visual consistency"],
        "dont_list": ["Avoid unnecessary technical jargon"],
        "emotions_to_evoke": ["trust", "professionalism"]
      }
    },
    "ux_assessment": {
      "overall_score": 70,
      "usability_score": 75,
      "accessibility_score": 60,
      "visual_design_score": 80,
      "performance_score": 70,
      "branding_consistency_score": 65
    },
    "recommendations": [
      {
        "category": "usability",
        "priority": "high",
        "issue": "No clear primary navigation detected",
        "recommendation": "Implement a visible primary navigation",
        "impact": "Significant improvement in user experience",
        "effort": "medium"
      }
    ],
    "problems": [
      {
        "category": "accessibility",
        "severity": "medium",
        "description": "Potential accessibility issues in images",
        "location": "Image elements on the site",
        "userImpact": "Users with visual impairments may encounter difficulties",
        "businessImpact": "Reduced reach and compliance risk"
      }
    ],
    "opportunities": [
      {
        "category": "branding",
        "potential": "high",
        "description": "Develop a stronger brand identity",
        "expectedBenefit": "Better recognition and brand loyalty",
        "implementationComplexity": "medium"
      }
    ],
    "timestamp": "2024-01-15T10:30:00Z",
    "processingTime": 15000
  },
  "message": "UX analysis completed successfully"
}
```

## ðŸŽ¯ Analysis Categories

### UX Recommendations

Recommendations are classified as:
- **design**: Visual and aesthetic aspects
- **usability**: Ease of use and navigation
- **accessibility**: Accessibility for users with disabilities
- **performance**: Performance and speed
- **branding**: Brand consistency
- **content**: Content quality and structure

### Priorities

- **high**: Significant impact, implement soon
- **medium**: Important improvement, mid-term implementation
- **low**: Minor improvement, when possible

### Implementation Effort

- **high**: Requires significant changes
- **medium**: Requires moderate changes
- **low**: Minor or quick changes

## ðŸ’¡ Usage Examples

### Basic Analysis

```javascript
const response = await fetch('/api/agents/ux/analyze', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    site_id: 'site-uuid'
  })
});

const result = await response.json();
console.log('Analysis completed:', result.data);
```

### Analysis with Custom Options

```javascript
const response = await fetch('/api/agents/ux/analyze', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    site_id: 'uuid-del-sitio',
    options: {
      timeout: 45000,
      includeScreenshot: false,
      provider: 'openai',
      modelId: 'gpt-4-turbo',
      updateBranding: false,
      language: 'en'
    }
  })
});

const result = await response.json();
```

### Processing Results

```javascript
const { branding, ux_assessment, recommendations, problems, opportunities } = result.data;

// Analyze branding
console.log('Brand personality:', branding.brand_pyramid.brand_personality);
console.log('Primary colors:', branding.color_palette);

// Review scores
console.log('Overall UX score:', ux_assessment.overall_score);
console.log('Accessibility score:', ux_assessment.accessibility_score);

// Filter critical recommendations
const criticalRecommendations = recommendations.filter(r => r.priority === 'high');
console.log('Critical recommendations:', criticalRecommendations);

// Identify severe problems
const severeProblems = problems.filter(p => p.severity === 'critical');
console.log('Severe problems:', severeProblems);
```

## ðŸ”„ Database Integration

### Automatic Branding Update

The endpoint automatically updates the `branding` object in the `settings` table:

```sql
UPDATE settings 
SET branding = $1, updated_at = NOW()
WHERE site_id = $2;
```

### Analysis Storage

The complete analysis is stored in the `analysis` table:

```sql
INSERT INTO analysis (
  site_id, url_path, structure, user_id, status, 
  request_time, provider, model_id
) VALUES ($1, $2, $3, $4, $5, $6, $7, $8);
```

## ðŸ“ˆ Metrics and Scoring

### UX Scores

| Metric | Range | Description |
|--------|-------|-------------|
| **Overall Score** | 0-100 | Overall UX score |
| **Usability Score** | 0-100 | Ease of use |
| **Accessibility Score** | 0-100 | Web accessibility |
| **Visual Design Score** | 0-100 | Quality of visual design |
| **Performance Score** | 0-100 | Perceived performance |
| **Branding Consistency** | 0-100 | Brand consistency |

### Scoring Factors

- **Critical problems**: -20 points each
- **High problems**: -10 points each
- **High-priority recommendations**: -5 points each
- **Category-specific problems**: Specific penalties

## ðŸŽ¨ Completed Branding Object

The endpoint extracts and structures branding information:

### Brand Pyramid

- **Brand Essence**: Fundamental essence of the brand
- **Brand Personality**: Personality and character
- **Brand Benefits**: Main benefits offered
- **Brand Attributes**: Differentiating attributes
- **Brand Values**: Fundamental values
- **Brand Promise**: Value promise

### Visual Elements

- **Color Palette**: Primary, secondary, and accent colors
- **Typography**: Primary and secondary fonts
- **Brand Assets**: Logo variations and usage

### Voice and Tone

- **Communication Style**: Communication style
- **Personality Traits**: Personality traits
- **Forbidden Words**: Words to avoid
- **Preferred Phrases**: Preferred phrases

## ðŸ” Use Cases

### Full UX Audit

Ideal para realizar auditorÃ­as integrales de experiencia de usuario:

```javascript
// Full analysis with branding update
const audit = await analyzeUX({
  url: 'https://client.com',
  site_id: siteId,
  user_id: userId,
  options: { 
    updateBranding: true,
    language: 'es' 
  }
});

// Generate recommendations report
const report = generateUXReport(audit.data);
```

### Competitive Benchmarking

Compare multiple websites:

```javascript
const competitors = ['site1.com', 'site2.com', 'site3.com'];
const results = await Promise.all(
  competitors.map(url => analyzeUX({ url, site_id, user_id }))
);

// Compare scores
const comparison = results.map(r => ({
  url: r.data.url,
  overall_score: r.data.ux_assessment.overall_score,
  usability_score: r.data.ux_assessment.usability_score
}));
```

### Tracking Improvements

Evaluate the impact of implemented changes:

```javascript
// Analysis before changes
const beforeAnalysis = await analyzeUX(params);

// ... implement changes ...

// Analysis after changes
const afterAnalysis = await analyzeUX(params);

// Compare improvements
const improvement = {
  overall: afterAnalysis.ux_assessment.overall_score - beforeAnalysis.ux_assessment.overall_score,
  usability: afterAnalysis.ux_assessment.usability_score - beforeAnalysis.ux_assessment.usability_score
};
```

## ðŸš¨ Error Handling

### Common Errors

| Error | Description | Solution |
|-------|-------------|----------|
| `VALIDATION_ERROR` | Invalid parameters | Verify URL format and UUIDs |
| `ANALYSIS_ERROR` | Analysis error | Check connectivity and timeout |
| `DATABASE_ERROR` | Database error | Verify permissions and connection |

### Status Codes

- **200**: Analysis completed successfully
- **400**: Invalid parameters
- **500**: Internal server error

## ðŸ“š Related Documentation

- [Structured Analysis](/rest-api/analysis/sites/site-structure)
- [Branding Settings](/rest-api/settings/branding)
- [AI Agents](/rest-api/agents)