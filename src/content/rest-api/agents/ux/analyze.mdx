---
title: "API de An치lisis UX y Branding"
description: "Realiza an치lisis integral de UX y completa autom치ticamente el objeto settings.branding"
---

import UxAnalysisTester from '@/components/ApiTester/UxAnalysisTester'

# API de An치lisis UX y Branding 游꿛

Esta API realiza un an치lisis espec칤fico de UX y branding utilizando 칰nicamente el `site_id` para obtener la informaci칩n del sitio desde la base de datos, completar autom치ticamente el objeto `settings.branding` y generar recomendaciones, problemas y oportunidades de experiencia de usuario.

## 游 Funcionalidades

- **Obtenci칩n autom치tica** de informaci칩n del sitio desde la base de datos usando `site_id`
- **An치lisis estructurado** del sitio web
- **Completado autom치tico** del objeto `settings.branding`
- **Generaci칩n de recomendaciones** UX categorizadas
- **Identificaci칩n de problemas** y oportunidades
- **C치lculo de scores** de UX y usabilidad
- **Guardado autom치tico** en base de datos

## 游빍 Prueba la API

<UxAnalysisTester />

## 游늶 Endpoints Disponibles

### POST `/api/agents/ux/analyze`

Realiza un an치lisis completo de UX y branding del sitio web.

### GET `/api/agents/ux/analyze`

Obtiene informaci칩n sobre el servicio y sus capacidades.

## 游댢 Par치metros de Solicitud

### Par치metros Obligatorios

| Par치metro | Tipo | Descripci칩n |
|-----------|------|-------------|
| `site_id` | string | UUID del sitio en la base de datos (칰nico par치metro obligatorio) |

### Par치metros Opcionales

| Par치metro | Tipo | Descripci칩n | Defecto |
|-----------|------|-------------|---------|
| `user_id` | string | UUID del usuario (se obtiene autom치ticamente del sitio) | auto |
| `options.timeout` | number | Tiempo l칤mite en ms (5000-60000) | 30000 |
| `options.includeScreenshot` | boolean | Incluir captura de pantalla | true |
| `options.provider` | string | Proveedor de IA (anthropic/openai/gemini) | anthropic |
| `options.modelId` | string | ID del modelo espec칤fico a usar | claude-3-5-sonnet-20240620 |
| `options.updateBranding` | boolean | Actualizar branding en BD | true |
| `options.language` | string | Idioma del an치lisis (en/es) | es |

## 游늵 Estructura de Respuesta

```json
{
  "success": true,
  "data": {
    "url": "https://ejemplo.com",
    "site_id": "uuid-del-sitio",
    "user_id": "uuid-del-usuario",
    "analysis_id": "uuid-del-an치lisis",
    "branding": {
      "brand_pyramid": {
        "brand_essence": "Esencia de la marca",
        "brand_personality": "Personalidad de la marca",
        "brand_benefits": "Beneficios principales",
        "brand_attributes": "Atributos clave",
        "brand_values": "Valores fundamentales",
        "brand_promise": "Promesa de marca"
      },
      "brand_archetype": "hero",
      "color_palette": {
        "primary_color": "#000000",
        "secondary_color": "#666666",
        "accent_color": "#e0ff17"
      },
      "typography": {
        "primary_font": "Arial, sans-serif",
        "secondary_font": "Times, serif",
        "font_size_scale": "medium"
      },
      "voice_and_tone": {
        "communication_style": "profesional",
        "personality_traits": ["innovador", "confiable", "profesional"],
        "forbidden_words": ["cheap", "basic"],
        "preferred_phrases": ["premium quality", "customer-focused"]
      },
      "brand_guidelines": {
        "do_list": ["Mantener consistencia visual"],
        "dont_list": ["Usar jerga t칠cnica innecesaria"],
        "emotions_to_evoke": ["confianza", "profesionalismo"]
      }
    },
    "ux_assessment": {
      "overall_score": 70,
      "usability_score": 75,
      "accessibility_score": 60,
      "visual_design_score": 80,
      "performance_score": 70,
      "branding_consistency_score": 65
    },
    "recommendations": [
      {
        "category": "usability",
        "priority": "alta",
        "issue": "No se detectaron elementos de navegaci칩n claros",
        "recommendation": "Implementar una navegaci칩n principal visible",
        "impact": "Mejora significativa en la experiencia del usuario",
        "effort": "medio"
      }
    ],
    "problems": [
      {
        "category": "accessibility",
        "severity": "medio",
        "description": "Posibles problemas de accesibilidad en im치genes",
        "location": "Elementos de imagen en el sitio",
        "userImpact": "Usuarios con discapacidades visuales pueden tener dificultades",
        "businessImpact": "Reducci칩n en alcance y cumplimiento legal"
      }
    ],
    "opportunities": [
      {
        "category": "branding",
        "potential": "alto",
        "description": "Desarrollar una identidad de marca m치s s칩lida",
        "expectedBenefit": "Mejor reconocimiento y lealtad de marca",
        "implementationComplexity": "media"
      }
    ],
    "timestamp": "2024-01-15T10:30:00Z",
    "processingTime": 15000
  },
  "message": "An치lisis UX completado exitosamente"
}
```

## 游꿢 Categor칤as de An치lisis

### Recomendaciones UX

Las recomendaciones se clasifican en:

- **design**: Aspectos visuales y est칠ticos
- **usability**: Facilidad de uso y navegaci칩n
- **accessibility**: Accesibilidad para usuarios con discapacidades
- **performance**: Rendimiento y velocidad
- **branding**: Consistencia de marca
- **content**: Calidad y estructura del contenido

### Prioridades

- **alta**: Impacto significativo, debe implementarse pronto
- **media**: Mejora importante, implementar en medio plazo
- **baja**: Mejora menor, implementar cuando sea posible

### Esfuerzo de Implementaci칩n

- **alto**: Requiere cambios significativos
- **medio**: Requiere modificaciones moderadas
- **bajo**: Cambios menores o r치pidos

## 游눠 Ejemplos de Uso

### An치lisis B치sico

```javascript
const response = await fetch('/api/agents/ux/analyze', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    site_id: 'uuid-del-sitio'
  })
});

const result = await response.json();
console.log('An치lisis completado:', result.data);
```

### An치lisis con Opciones Personalizadas

```javascript
const response = await fetch('/api/agents/ux/analyze', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    site_id: 'uuid-del-sitio',
    options: {
      timeout: 45000,
      includeScreenshot: false,
      provider: 'openai',
      modelId: 'gpt-4-turbo',
      updateBranding: false,
      language: 'en'
    }
  })
});

const result = await response.json();
```

### Procesamiento de Resultados

```javascript
const { branding, ux_assessment, recommendations, problems, opportunities } = result.data;

// Analizar branding
console.log('Personalidad de marca:', branding.brand_pyramid.brand_personality);
console.log('Colores principales:', branding.color_palette);

// Revisar scores
console.log('Score UX general:', ux_assessment.overall_score);
console.log('Score de accesibilidad:', ux_assessment.accessibility_score);

// Filtrar recomendaciones cr칤ticas
const criticalRecommendations = recommendations.filter(r => r.priority === 'alta');
console.log('Recomendaciones cr칤ticas:', criticalRecommendations);

// Identificar problemas severos
const severeProblems = problems.filter(p => p.severity === 'cr칤tico');
console.log('Problemas severos:', severeProblems);
```

## 游댃 Integraci칩n con Base de Datos

### Actualizaci칩n Autom치tica del Branding

El endpoint actualiza autom치ticamente el objeto `branding` en la tabla `settings`:

```sql
UPDATE settings 
SET branding = $1, updated_at = NOW()
WHERE site_id = $2;
```

### Guardado del An치lisis

El an치lisis completo se guarda en la tabla `analysis`:

```sql
INSERT INTO analysis (
  site_id, url_path, structure, user_id, status, 
  request_time, provider, model_id
) VALUES ($1, $2, $3, $4, $5, $6, $7, $8);
```

## 游늳 M칠tricas y Puntuaci칩n

### Scores de UX

| M칠trica | Rango | Descripci칩n |
|---------|-------|-------------|
| **Overall Score** | 0-100 | Puntuaci칩n general de UX |
| **Usability Score** | 0-100 | Facilidad de uso |
| **Accessibility Score** | 0-100 | Accesibilidad web |
| **Visual Design Score** | 0-100 | Calidad del dise침o visual |
| **Performance Score** | 0-100 | Rendimiento percibido |
| **Branding Consistency** | 0-100 | Consistencia de marca |

### Factores de Puntuaci칩n

- **Problemas cr칤ticos**: -20 puntos cada uno
- **Problemas altos**: -10 puntos cada uno
- **Recomendaciones alta prioridad**: -5 puntos cada una
- **Problemas por categor칤a**: Penalizaciones espec칤ficas

## 游꿛 Objeto Branding Completado

El endpoint extrae y estructura informaci칩n de branding:

### Brand Pyramid

- **Brand Essence**: Esencia fundamental de la marca
- **Brand Personality**: Personalidad y car치cter
- **Brand Benefits**: Beneficios principales ofrecidos
- **Brand Attributes**: Atributos diferenciadores
- **Brand Values**: Valores fundamentales
- **Brand Promise**: Promesa de valor

### Elementos Visuales

- **Color Palette**: Colores primarios, secundarios y de acento
- **Typography**: Fuentes principales y secundarias
- **Brand Assets**: Variaciones de logo y uso

### Voz y Tono

- **Communication Style**: Estilo de comunicaci칩n
- **Personality Traits**: Rasgos de personalidad
- **Forbidden Words**: Palabras a evitar
- **Preferred Phrases**: Frases preferidas

## 游댌 Casos de Uso

### Auditor칤a UX Completa

Ideal para realizar auditor칤as integrales de experiencia de usuario:

```javascript
// An치lisis completo con actualizaci칩n de branding
const audit = await analyzeUX({
  url: 'https://cliente.com',
  site_id: siteId,
  user_id: userId,
  options: { 
    updateBranding: true,
    language: 'es' 
  }
});

// Generar reporte de recomendaciones
const report = generateUXReport(audit.data);
```

### Benchmarking Competitivo

Comparar m칰ltiples sitios web:

```javascript
const competitors = ['site1.com', 'site2.com', 'site3.com'];
const results = await Promise.all(
  competitors.map(url => analyzeUX({ url, site_id, user_id }))
);

// Comparar scores
const comparison = results.map(r => ({
  url: r.data.url,
  overall_score: r.data.ux_assessment.overall_score,
  usability_score: r.data.ux_assessment.usability_score
}));
```

### Seguimiento de Mejoras

Evaluar el impacto de cambios implementados:

```javascript
// An치lisis antes de los cambios
const beforeAnalysis = await analyzeUX(params);

// ... implementar cambios ...

// An치lisis despu칠s de los cambios
const afterAnalysis = await analyzeUX(params);

// Comparar mejoras
const improvement = {
  overall: afterAnalysis.ux_assessment.overall_score - beforeAnalysis.ux_assessment.overall_score,
  usability: afterAnalysis.ux_assessment.usability_score - beforeAnalysis.ux_assessment.usability_score
};
```

## 游뚿 Manejo de Errores

### Errores Comunes

| Error | Descripci칩n | Soluci칩n |
|-------|-------------|----------|
| `VALIDATION_ERROR` | Par치metros inv치lidos | Verificar formato de URL y UUIDs |
| `ANALYSIS_ERROR` | Error en el an치lisis | Revisar conectividad y timeout |
| `DATABASE_ERROR` | Error en base de datos | Verificar permisos y conexi칩n |

### C칩digos de Estado

- **200**: An치lisis completado exitosamente
- **400**: Par치metros inv치lidos
- **500**: Error interno del servidor

## 游닄 Documentaci칩n Relacionada

- [An치lisis Estructurado](/rest-api/analysis/sites/site-structure)
- [Configuraci칩n de Branding](/rest-api/settings/branding)
- [Agentes de IA](/rest-api/agents) 