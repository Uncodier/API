---
title: API de Contenido para Segmentos
description: Documentaci칩n para el API de recomendaciones de contenido personalizado basado en segmentos de audiencia
---

# API de Contenido para Segmentos

El endpoint `/api/site/content` permite obtener un conjunto de recomendaciones de contenido personalizado (posts, videos, anuncios, etc.) basado en segmentos de audiencia espec칤ficos o un resumen global de todos los segmentos. Esta API es 칰til para personalizar la experiencia de usuario y maximizar el engagement con diferentes tipos de audiencias.

> 游늵 **Contenido personalizado para cada segmento o an치lisis global** 
> 
> Esta API utiliza algoritmos avanzados de IA para recomendar el contenido m치s relevante
> para cada segmento de audiencia espec칤fico, o generar un resumen completo cuando no se especifica
> un segmento particular. Maximiza tasas de conversi칩n, engagement y satisfacci칩n del usuario.
> Ideal para estrategias de marketing de contenidos y personalizaci칩n web.

## Caracter칤sticas principales

- Recomendaciones de contenido personalizadas basadas en segmentos de audiencia espec칤ficos
- **NUEVA**: An치lisis global de todos los segmentos cuando no se especifica `segment_id`
- Soporte para m칰ltiples tipos de contenido (art칤culos, videos, podcasts, anuncios)
- Filtrado por tem치tica, formato, duraci칩n y otros atributos
- Puntuaciones de relevancia y predicci칩n de engagement
- Personalizaci칩n basada en diferentes m칠tricas (inter칠s, etapa del funnel, intenci칩n)
- Soporte para diferentes modelos de IA para la generaci칩n de recomendaciones
- Integraci칩n con sistemas de gesti칩n de contenidos (CMS)

import { UnifiedApiTester } from '@/components/ApiTester';

<UnifiedApiTester 
  apiType="content" 
  title="Recomendador de Contenidos por Segmento"
  description="Prueba el API de contenido para segmentos con tus propios par치metros."
  defaultEndpoint="/api/site/content"
  defaultMethod="POST"
  defaultUrl="https://ejemplo.com"
  defaultSegmentId=""
  defaultLimit={10}
  defaultTimeout="30000"
  showModelOptions={true}
  defaultModelType="anthropic"
  defaultModel="claude-3-5-sonnet-20240620"
  showSiteUrlField={true}
  additionalFields={[
    {
      name: "url",
      label: "URL del sitio",
      type: "text",
      defaultValue: "https://ejemplo.com",
      placeholder: "https://tusitio.com",
      required: true
    },
    {
      name: "segment_id",
      label: "ID del Segmento (opcional)",
      type: "text",
      defaultValue: "",
      placeholder: "Dejar vac칤o para analizar todos los segmentos",
      required: false
    },
    {
      name: "content_types",
      label: "Tipos de contenido",
      type: "select",
      multiple: true,
      options: [
        { value: "posts", label: "Art칤culos/Posts" },
        { value: "videos", label: "Videos" },
        { value: "podcasts", label: "Podcasts" },
        { value: "ads", label: "Anuncios" },
        { value: "social", label: "Contenido Social" },
        { value: "downloads", label: "Descargables" }
      ],
      defaultValue: ["posts", "videos"]
    },
    {
      name: "limit",
      label: "N칰mero m치ximo de resultados",
      type: "number",
      defaultValue: 10,
      min: 1,
      max: 50
    },
    {
      name: "user_id",
      label: "ID de Usuario (opcional)",
      type: "text",
      placeholder: "user_123456"
    },
    {
      name: "site_id",
      label: "ID del Sitio (opcional)",
      type: "text",
      placeholder: "site_789012"
    },
    {
      name: "funnel_stage",
      label: "Etapa del funnel",
      type: "select",
      options: [
        { value: "all", label: "Todas las etapas" },
        { value: "awareness", label: "Conocimiento (Awareness)" },
        { value: "consideration", label: "Consideraci칩n" },
        { value: "decision", label: "Decisi칩n" },
        { value: "retention", label: "Retenci칩n" }
      ],
      defaultValue: "all"
    },
    {
      name: "sort_by",
      label: "Criterio de ordenaci칩n",
      type: "select",
      options: [
        { value: "relevance", label: "Relevancia" },
        { value: "date", label: "Fecha" },
        { value: "popularity", label: "Popularidad" }
      ],
      defaultValue: "relevance"
    },
    {
      name: "includeScreenshot",
      label: "Incluir captura de pantalla",
      type: "checkbox",
      defaultValue: false
    }
  ]}
/>

## Par치metros de solicitud

| Par치metro | Tipo | Descripci칩n | Valores posibles | Requerido |
|-----------|------|-------------|------------------|-----------|
| `url` | string | URL del sitio | URL v치lida | S칤 |
| `segment_id` | string | ID del segmento para el que se recomendar치n contenidos. **Si se omite, se analizar치n todos los segmentos** | Cualquier ID v치lido | **No** |
| `content_types` | array | Tipos de contenido a recomendar | `posts`, `videos`, `podcasts`, `ads`, `social`, `downloads` | No (default: todos) |
| `limit` | number | N칰mero m치ximo de recomendaciones | 1-50 | No (default: 10) |
| `user_id` | string | ID del usuario | Cualquier ID v치lido | No |
| `site_id` | string | ID del sitio | Cualquier ID v치lido | No |
| `funnel_stage` | string | Filtrar por etapa del funnel | `all`, `awareness`, `consideration`, `decision`, `retention` | No (default: `all`) |
| `topics` | array | Filtrar por temas espec칤ficos | Array de strings | No |
| `aiProvider` | string | Proveedor del modelo de IA | `openai`, `anthropic`, `gemini` | No |
| `aiModel` | string | ID del modelo de IA | Depende del proveedor | No |
| `timeout` | number | Tiempo m치ximo de espera en ms | 5000-120000 | No (default: 30000) |
| `include_metadata` | boolean | Si se deben incluir metadatos detallados | `true`, `false` | No (default: `true`) |
| `sort_by` | string | Criterio de ordenaci칩n | `relevance`, `date`, `popularity` | No (default: `relevance`) |

## Ejemplos de uso

### An치lisis de todos los segmentos (NUEVO)

```json
{
  "url": "https://ejemplo.com",
  "limit": 10
}
```

### Solicitud b치sica de recomendaciones para un segmento espec칤fico

```json
{
  "url": "https://ejemplo.com",
  "segment_id": "seg_content_creators",
  "limit": 10
}
```

### Recomendaciones filtradas por tipo de contenido

```json
{
  "url": "https://ejemplo.com",
  "segment_id": "seg_content_creators",
  "content_types": ["posts", "videos"],
  "limit": 15,
  "funnel_stage": "consideration"
}
```

### Recomendaciones con configuraci칩n personalizada

```json
{
  "url": "https://ejemplo.com",
  "segment_id": "seg_content_creators",
  "content_types": ["posts", "downloads"],
  "limit": 5,
  "topics": ["marketing digital", "redes sociales"],
  "aiProvider": "anthropic",
  "aiModel": "claude-3-5-sonnet-20240620",
  "sort_by": "relevance"
}
```

## Respuesta

La respuesta var칤a dependiendo de si se especifica un `segment_id` o no:

### Respuesta para segmento espec칤fico

Cuando se proporciona un `segment_id`, la respuesta incluye los siguientes campos:

| Campo | Tipo | Descripci칩n |
|-------|------|-------------|
| `url` | string | URL del sitio |
| `segment_id` | string | ID del segmento analizado |
| `recommendations` | array | Lista de contenidos recomendados |
| `total_results` | number | N칰mero total de resultados encontrados |
| `returned_results` | number | N칰mero de resultados devueltos (limitado por `limit`) |
| `metadata` | object | Metadatos de la solicitud y an치lisis |

### Respuesta para todos los segmentos (NUEVO)

Cuando **NO** se proporciona un `segment_id`, la respuesta incluye los siguientes campos:

| Campo | Tipo | Descripci칩n |
|-------|------|-------------|
| `url` | string | URL del sitio |
| `analysis_type` | string | Siempre "all_segments" |
| `segments_summary` | array | Resumen de cada segmento encontrado |
| `global_recommendations` | array | Lista de contenidos recomendados globalmente |
| `total_segments_analyzed` | number | N칰mero total de segmentos analizados |
| `total_content_items` | number | N칰mero total de elementos de contenido encontrados |
| `metadata` | object | Metadatos de la solicitud y an치lisis |

### Ejemplo de respuesta para todos los segmentos

```json
{
  "url": "https://ejemplo.com",
  "analysis_type": "all_segments",
  "segments_summary": [
    {
      "segment_id": "seg_content_creators",
      "segment_name": "Creadores de Contenido",
      "content_count": 25,
      "top_themes": ["herramientas", "productividad", "creatividad"],
      "engagement_level": "high",
      "primary_funnel_stage": "consideration"
    },
    {
      "segment_id": "seg_small_businesses",
      "segment_name": "Peque침as Empresas",
      "content_count": 18,
      "top_themes": ["marketing", "automatizaci칩n", "crecimiento"],
      "engagement_level": "medium",
      "primary_funnel_stage": "awareness"
    },
    {
      "segment_id": "seg_freelancers",
      "segment_name": "Freelancers",
      "content_count": 22,
      "top_themes": ["gesti칩n de tiempo", "clientes", "finanzas"],
      "engagement_level": "high",
      "primary_funnel_stage": "decision"
    }
  ],
  "global_recommendations": [
    {
      "id": "post_67890",
      "type": "post",
      "title": "Gu칤a Completa para Emprendedores Digitales 2024",
      "description": "Estrategias y herramientas esenciales para cualquier emprendedor que quiera destacar en el mundo digital, sin importar su nicho o experiencia.",
      "url": "https://ejemplo.com/blog/guia-emprendedores-digitales-2024",
      "duration": {
        "unit": "minutes",
        "value": 12
      },
      "topics": [
        "emprendimiento",
        "estrategia digital",
        "herramientas"
      ],
      "funnelStage": "awareness",
      "relevanceScore": 0.92,
      "engagementPrediction": {
        "score": 0.88,
        "metrics": {
          "crossSegmentAppeal": "Very high",
          "shareability": "High",
          "conversionPotential": "Medium-high"
        }
      },
      "format": "comprehensive-guide",
      "readingLevel": "intermediate",
      "popularity": {
        "views": 18450,
        "shares": 526,
        "comments": 89
      }
    }
  ],
  "total_segments_analyzed": 3,
  "total_content_items": 65,
  "metadata": {
    "request": {
      "timestamp": "2024-07-15T16:42:18Z",
      "parameters": {
        "analysis_type": "all_segments",
        "content_types": ["posts", "videos"],
        "limit": 1
      }
    },
    "analysis": {
      "modelUsed": "claude-3-5-sonnet-20240620",
      "aiProvider": "anthropic",
      "processingTime": "2.24 seconds",
      "segmentsDataSource": "all_segments (last updated: 2024-07-10)",
      "contentInventorySize": 65,
      "filteringMetrics": [
        "Relevancia cross-segmento",
        "Engagement promedio por segmento",
        "Recencia del contenido",
        "Potencial de conversi칩n global"
      ]
    }
  }
}
```

### Ejemplo de respuesta para segmento espec칤fico

```json
{
  "url": "https://ejemplo.com",
  "segment_id": "seg_content_creators",
  "recommendations": [
    {
      "id": "post_12345",
      "type": "post",
      "title": "10 Herramientas Esenciales para Creadores de Contenido en 2024",
      "description": "Descubre las mejores herramientas que todo creador de contenido deber칤a conocer para optimizar su flujo de trabajo y mejorar la calidad de sus producciones.",
      "url": "https://ejemplo.com/blog/herramientas-creadores-contenido-2024",
      "duration": {
        "unit": "minutes",
        "value": 8
      },
      "topics": [
        "herramientas digitales",
        "productividad",
        "creaci칩n de contenido"
      ],
      "funnelStage": "consideration",
      "relevanceScore": 0.95,
      "engagementPrediction": {
        "score": 0.89,
        "metrics": {
          "timeOnPage": "High",
          "clickProbability": "Very high",
          "conversionPotential": "Medium-high"
        }
      },
      "format": "longform",
      "readingLevel": "intermediate",
      "popularity": {
        "views": 12560,
        "shares": 342,
        "comments": 48
      }
    },
    {
      "id": "video_56789",
      "type": "video",
      "title": "Tutorial: Edici칩n Profesional de Video en Menos de 30 Minutos",
      "description": "Aprende t칠cnicas r치pidas de edici칩n profesional que te permitir치n crear videos de alta calidad sin pasar horas frente al ordenador.",
      "url": "https://ejemplo.com/videos/tutorial-edicion-profesional-rapida",
      "duration": {
        "unit": "minutes",
        "value": 18
      },
      "topics": [
        "edici칩n de video",
        "tutoriales",
        "productividad"
      ],
      "funnelStage": "consideration",
      "relevanceScore": 0.94,
      "engagementPrediction": {
        "score": 0.92,
        "metrics": {
          "watchTime": "High",
          "completionRate": "Medium-high",
          "interactionRate": "High"
        }
      },
      "format": "tutorial",
      "difficultyLevel": "intermediate",
      "popularity": {
        "views": 8790,
        "likes": 756,
        "shares": 189
      }
    },
    {
      "id": "download_23456",
      "type": "download",
      "title": "Kit de Plantillas para Redes Sociales - Edici칩n Creadores",
      "description": "Descarga este conjunto de 15 plantillas editables para Instagram, TikTok y YouTube que te ayudar치n a mantener una presencia visual consistente.",
      "url": "https://ejemplo.com/recursos/kit-plantillas-redes-sociales",
      "fileType": "ZIP (PSD, AI, Canva)",
      "fileSize": "48.5 MB",
      "topics": [
        "dise침o",
        "recursos gr치ficos",
        "redes sociales"
      ],
      "funnelStage": "decision",
      "relevanceScore": 0.91,
      "engagementPrediction": {
        "score": 0.87,
        "metrics": {
          "downloadProbability": "Very high",
          "leadConversion": "High",
          "customerJourney": "Accelerator"
        }
      },
      "subscriptionRequired": true,
      "popularity": {
        "downloads": 3456,
        "averageRating": 4.8
      }
    }
  ],
  "total_results": 87,
  "returned_results": 3,
  "metadata": {
    "request": {
      "timestamp": "2024-07-15T16:42:18Z",
      "parameters": {
        "segment_id": "seg_content_creators",
        "content_types": ["posts", "videos", "downloads"],
        "limit": 3
      }
    },
    "analysis": {
      "modelUsed": "claude-3-5-sonnet-20240620",
      "aiProvider": "anthropic",
      "processingTime": "1.32 seconds",
      "segmentDataSource": "seg_content_creators (last updated: 2024-07-10)",
      "contentInventorySize": 412,
      "filteringMetrics": [
        "Relevancia tem치tica",
        "Historial de engagement del segmento",
        "Recencia del contenido",
        "Alineaci칩n con intereses declarados"
      ]
    }
  }
}
```

## C칩digos de estado

| C칩digo | Descripci칩n |
|--------|-------------|
| 200 | Solicitud exitosa |
| 400 | Par치metros inv치lidos |
| 404 | Segmento no encontrado o sin contenido disponible |
| 429 | L칤mite de solicitudes excedido |
| 500 | Error interno del servidor | 