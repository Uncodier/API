---
title: API de Análisis Estructural de Sitios Web
description: Documentación completa para la API avanzada de análisis estructural de sitios web
---

# API de Análisis Estructural de Sitios Web

El endpoint `/api/site/analyze/structure` permite realizar análisis estructurales de sitios web, evaluando la jerarquía de elementos, bloques de contenido, estructura semántica y relaciones entre elementos.

## Características principales

- Implementación avanzada y flexible
- Enfocado específicamente en el análisis estructural del sitio
- Utiliza servicios especializados para el análisis de estructura
- Permite configurar múltiples opciones avanzadas
- Puede utilizar diferentes proveedores de IA (OpenAI, Anthropic, Gemini)
- Sistema sofisticado de manejo de errores

import { UnifiedApiTester } from '@/components/ApiTester';

<UnifiedApiTester 
  apiType="site" 
  title="Analizador Estructural de Sitios Web"
  description="Prueba el API de análisis estructural de sitios web con tus propios parámetros."
  defaultEndpoint="/api/site/analyze/structure"
  defaultMethod="POST"
  defaultUrl="https://ejemplo.com"
  defaultTimeout="30000"
  showScreenshotOption={true}
  showModelOptions={true}
  defaultModelType="openai"
  defaultModel="gpt-4o"
  showAnalysisTypeField={false}
/>

## Enfoque del análisis estructural

El análisis estructural se centra en comprender la organización y jerarquía del contenido del sitio web, incluyendo:

- Jerarquía de elementos
- Bloques de contenido
- Estructura semántica
- Relaciones entre elementos
- Navegación y menús
- Secciones principales y su importancia
- Patrones de diseño utilizados

## Métodos disponibles

### POST /api/site/analyze/structure

Realiza un análisis estructural del sitio web, enfocado en la estructura del DOM y la organización del contenido.

#### Parámetros de solicitud

```json
{
  "url": "https://ejemplo.com", // URL del sitio (obligatorio)
  "htmlContent": "<html>...</html>", // HTML de la página (opcional)
  "screenshot": "data:image/png;base64,...", // Captura de pantalla en Base64 (opcional)
  "options": {
    "timeout": 30000, // Tiempo máximo de espera en milisegundos (entre 5000 y 60000)
    "userAgent": "Mozilla/5.0...", // User Agent personalizado (opcional)
    "depth": 2, // Profundidad del análisis (1-3)
    "ignoreSSL": false, // Ignorar errores de certificados SSL
    "failOnError": false, // Si es false, intenta continuar incluso con errores
    "safeSelectors": true, // Si es true, valida los selectores antes de usarlos
    "includeScreenshot": true, // Incluir captura de pantalla en la respuesta
    "aiProvider": "openai", // Proveedor de IA: 'openai', 'anthropic', 'gemini'
    "aiModel": "gpt-4o" // Modelo específico de IA a utilizar
  }
}
```

#### Respuesta

```json
{
  "url": "https://ejemplo.com",
  "structure": {
    "headings": {
      "h1": 1,
      "h2": 5,
      "h3": 12,
      "h4": 8
    },
    "sections": [
      {
        "type": "header",
        "elements": 5,
        "importance": "high"
      },
      {
        "type": "main-content",
        "elements": 25,
        "importance": "high"
      },
      {
        "type": "sidebar",
        "elements": 10,
        "importance": "medium"
      },
      {
        "type": "footer",
        "elements": 8,
        "importance": "low"
      }
    ],
    "navigation": {
      "mainMenu": {
        "items": 6,
        "depth": 2
      },
      "footer": {
        "items": 4,
        "depth": 1
      }
    },
    "contentBlocks": [
      {
        "type": "hero",
        "elements": 3,
        "position": "top"
      },
      {
        "type": "features",
        "elements": 12,
        "position": "middle"
      },
      {
        "type": "testimonials",
        "elements": 6,
        "position": "middle-bottom"
      },
      {
        "type": "contact",
        "elements": 5,
        "position": "bottom"
      }
    ],
    "semantics": {
      "articleCount": 3,
      "sectionCount": 8,
      "navCount": 2,
      "asideCount": 1,
      "footerCount": 1,
      "headerCount": 1
    },
    "accessibility": {
      "ariaUsage": {
        "score": 75,
        "details": "Uso moderado de atributos ARIA"
      },
      "semanticStructure": {
        "score": 85,
        "details": "Buena estructura semántica general"
      }
    }
  },
  "analysis": {
    "clarity": 85,
    "hierarchy": 90,
    "consistency": 80,
    "userExperience": 88,
    "navigationUsability": 82,
    "contentOrganization": 87
  },
  "patterns": [
    {
      "name": "Hero Section",
      "implementation": "Estándar",
      "effectiveness": "Alta"
    },
    {
      "name": "Card Grid",
      "implementation": "Responsive",
      "effectiveness": "Media-Alta"
    },
    {
      "name": "Sticky Navigation",
      "implementation": "Parcial",
      "effectiveness": "Media"
    }
  ],
  "recommendations": [
    {
      "category": "estructura",
      "priority": "media",
      "issue": "Jerarquía de encabezados inconsistente",
      "recommendation": "Asegurar que los encabezados sigan una jerarquía lógica",
      "impact": "Mejora en SEO y accesibilidad"
    },
    {
      "category": "navegación",
      "priority": "alta",
      "issue": "Menú móvil difícil de usar",
      "recommendation": "Simplificar la estructura del menú en dispositivos móviles",
      "impact": "Mejora significativa en la experiencia móvil"
    },
    {
      "category": "contenido",
      "priority": "baja",
      "issue": "Bloques de contenido desalineados",
      "recommendation": "Alinear los bloques de contenido para mejorar la coherencia visual",
      "impact": "Mejora estética y de usabilidad"
    }
    // Otras recomendaciones...
  ],
  "timestamp": "2023-06-15T14:30:00Z",
  "analyzedBy": "AI Site Structure Analyzer v1.0",
  "analysisVersion": "1.0.0",
  "processingTime": 8765,
  "errors": [
    {
      "code": "SELECTOR_ERROR",
      "message": "No se pudo analizar un selector",
      "details": ".complex-selector > div:nth-child(3)",
      "recoverable": true
    }
    // Otros errores no críticos...
  ],
  "completeness": 95 // Porcentaje de completitud del análisis (0-100)
}
```

### GET /api/site/analyze/structure

Obtiene información sobre el servicio de análisis estructural.

#### Respuesta

```json
{
  "service": "AI Site Structure Analyzer",
  "version": "1.0.0",
  "status": "operational",
  "capabilities": [
    "structure-analysis",
    "semantic-analysis",
    "navigation-analysis",
    "content-organization",
    "pattern-detection"
  ],
  "limits": {
    "requestsPerDay": 100,
    "maxTimeout": 60000
  }
}
```

## Diferencias con la API General de Análisis

Esta API específica de análisis estructural (`/api/site/analyze/structure`) difiere de la API general (`/api/site/analyze`) en los siguientes aspectos:

1. **Enfoque**: Se centra exclusivamente en el análisis estructural del sitio, mientras que la API general abarca rendimiento, SEO, accesibilidad y mejores prácticas.
2. **Parámetros**: Incluye parámetros específicos para el análisis estructural, como la posibilidad de proporcionar HTML directamente.
3. **Respuesta**: Devuelve una estructura de respuesta enfocada en elementos estructurales como jerarquía, secciones, navegación y bloques de contenido.
4. **Análisis**: Proporciona un análisis más profundo de la estructura del sitio, incluyendo patrones de diseño y organización del contenido.

> **Nota:** Si necesitas un análisis más completo que incluya rendimiento, SEO y otros aspectos, puedes utilizar la API general `/api/site/analyze`. Para más información, consulta la [documentación de la API General de Análisis de Sitios](/api/analysis/sites/site).

## Códigos de estado

- `200 OK`: La solicitud se completó correctamente
- `400 Bad Request`: Parámetros de solicitud inválidos
- `404 Not Found`: El recurso solicitado no existe
- `429 Too Many Requests`: Se ha excedido el límite de solicitudes
- `500 Internal Server Error`: Error en el servidor durante el análisis
- `504 Gateway Timeout`: Tiempo de espera agotado durante el análisis

## Ejemplos de uso

### Realizar un análisis estructural básico

```javascript
const response = await fetch('https://tudominio.com/api/site/analyze/structure', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    url: 'https://ejemplo.com',
    options: {
      depth: 2,
      timeout: 30000,
      includeScreenshot: true
    }
  })
});

const data = await response.json();
console.log(data.structure); // Estructura del sitio
console.log(data.analysis); // Análisis de la estructura
```

### Realizar un análisis estructural con HTML proporcionado

```javascript
const response = await fetch('https://tudominio.com/api/site/analyze/structure', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    url: 'https://ejemplo.com',
    htmlContent: '<html>...</html>', // HTML del sitio
    options: {
      depth: 3,
      aiProvider: 'anthropic',
      aiModel: 'claude-3-5-sonnet-20240620'
    }
  })
});

const data = await response.json();
console.log(data.structure.sections); // Secciones del sitio
console.log(data.patterns); // Patrones de diseño detectados
console.log(data.recommendations); // Recomendaciones de mejora
```

### Obtener información sobre el servicio

```javascript
const response = await fetch('https://tudominio.com/api/site/analyze/structure', {
  method: 'GET'
});

const data = await response.json();
console.log(data.capabilities); // Capacidades del servicio
console.log(data.limits); // Límites del servicio
``` 